# Andronoma local development environment
# Copy this file to .env and adjust the secrets for your setup.

# ---------------------------------------------------------------------------- #
# Core application configuration
# ---------------------------------------------------------------------------- #
ANDRONOMA_API_HOST=0.0.0.0
ANDRONOMA_API_PORT=8000
ANDRONOMA_LOG_LEVEL=info
ANDRONOMA_JWT_SECRET=change-me
ANDRONOMA_JWT_ALGORITHM=HS256
ANDRONOMA_BUDGET_DEFAULT=1000

# ---------------------------------------------------------------------------- #
# Database (Postgres)
# ---------------------------------------------------------------------------- #
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=andronoma
POSTGRES_USER=andronoma
POSTGRES_PASSWORD=andronoma
ANDRONOMA_DATABASE_URL=postgresql+asyncpg://\${POSTGRES_USER}:\${POSTGRES_PASSWORD}@\${POSTGRES_HOST}:\${POSTGRES_PORT}/\${POSTGRES_DB}
ANDRONOMA_SYNC_DATABASE_URL=postgresql+psycopg://\${POSTGRES_USER}:\${POSTGRES_PASSWORD}@\${POSTGRES_HOST}:\${POSTGRES_PORT}/\${POSTGRES_DB}

# ---------------------------------------------------------------------------- #
# Redis / Celery
# ---------------------------------------------------------------------------- #
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB_CELERY=0
REDIS_DB_RESULTS=1
REDIS_DB_RATE_LIMITS=2
ANDRONOMA_BROKER_URL=redis://:\${REDIS_PASSWORD}@\${REDIS_HOST}:\${REDIS_PORT}/\${REDIS_DB_CELERY}
ANDRONOMA_RESULT_BACKEND=redis://:\${REDIS_PASSWORD}@\${REDIS_HOST}:\${REDIS_PORT}/\${REDIS_DB_RESULTS}
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_SOFT_TIME_LIMIT=600
CELERY_TASK_TIME_LIMIT=900
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=120
RATE_LIMIT_STORAGE_URL=redis://:\${REDIS_PASSWORD}@\${REDIS_HOST}:\${REDIS_PORT}/\${REDIS_DB_RATE_LIMITS}

# ---------------------------------------------------------------------------- #
# Object storage (MinIO / S3 compatible)
# ---------------------------------------------------------------------------- #
MINIO_ENDPOINT=minio:9000
MINIO_ROOT_USER=andronoma
MINIO_ROOT_PASSWORD=andronoma-secret
ANDRONOMA_MINIO_ENDPOINT=minio:9000
ANDRONOMA_MINIO_ACCESS_KEY=andronoma
ANDRONOMA_MINIO_SECRET_KEY=andronoma-secret
ANDRONOMA_MINIO_BUCKET=andronoma
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# ---------------------------------------------------------------------------- #
# LLM providers & generation services
# ---------------------------------------------------------------------------- #
OPENAI_API_KEY=
OPENAI_ORG_ID=
ANTHROPIC_API_KEY=
REPLICATE_API_TOKEN=
STABILITY_API_KEY=
SERP_API_KEY=

# ---------------------------------------------------------------------------- #
# Optional commerce & export integrations
# ---------------------------------------------------------------------------- #
SHOPIFY_STORE_DOMAIN=
SHOPIFY_ADMIN_TOKEN=
GOOGLE_SHEETS_SERVICE_ACCOUNT_JSON=./config/service-account.json
GOOGLE_SHEETS_SPREADSHEET_ID=
META_APP_ID=
META_APP_SECRET=
META_ACCESS_TOKEN=
META_AD_ACCOUNT_ID=

# ---------------------------------------------------------------------------- #
# Feature and promo flags
# ---------------------------------------------------------------------------- #
FEATURE_SHOPIFY=false
FEATURE_SHEETS=false
FEATURE_META=false
FEATURE_HEADLESS=true
SPEC_ENFORCE_STRICT=false
PROMO_ENABLE_ONBOARDING=true
PROMO_DEFAULT_CREDIT_CENTS=500
PROMO_CAMPAIGN_CODE=DEVLAUNCH
PROMO_BANNER_TEXT=Welcome to the Andronoma beta!

# ---------------------------------------------------------------------------- #
# Telemetry / observability
# ---------------------------------------------------------------------------- #
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
OTEL_SERVICE_NAME=andronoma
PROMETHEUS_PUSHGATEWAY_URL=
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# ---------------------------------------------------------------------------- #
# Rate limit + security knobs
# ---------------------------------------------------------------------------- #
API_CORS_ALLOW_ORIGINS=http://localhost:5173
API_ALLOWED_HOSTS=localhost,127.0.0.1
API_KEY_HEADER=X-API-Key
DEFAULT_API_KEY=

# ---------------------------------------------------------------------------- #
# MinIO buckets for outputs
# ---------------------------------------------------------------------------- #
MINIO_BUCKET_RAW=andronoma-raw
MINIO_BUCKET_PROCESSED=andronoma-processed
MINIO_BUCKET_OUTPUTS=andronoma-outputs

# ---------------------------------------------------------------------------- #
# Miscellaneous worker tuning
# ---------------------------------------------------------------------------- #
CELERY_QUEUE_DEFAULT=andronoma
CELERY_QUEUE_PRIORITY=high
RUN_SOFT_TIMEOUT_SECONDS=1500
RUN_HARD_TIMEOUT_SECONDS=1800

